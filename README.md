# java-was-2023

Java Web Application Server 2023

## 프로젝트 정보 

이 프로젝트는 우아한 테크코스 박재성님의 허가를 받아 https://github.com/woowacourse/jwp-was 
를 참고하여 작성되었습니다.

## 웹 서버 1단계 - index.html 응답

### 동작 원리
> 서버 실행시 소켓이 생성되고, 해당 소켓은 8080 포트로 들어오는 요청을 listening 한다.
> 
> 요청이 들어오면 복제 소켓이 생성되고, 새로운 스레드에 해당 소켓을 넘겨주며 스레드를 시작시킨다.
> 
> 소켓의 InputStream 으로 요청이 들어오면 미리 만들어둔 템플릿대로 HTTP 성공 응답을 생성하고, 
> OutputStream 으로 해당 응답을 보낸다.

### 현재 파악한 문제점 및 해결법
- 요청 들어올때마다 Thread 생성 -> 매우 비효율적
  > Thread 생성/종료 비용은 싸지 않다. <br/>
  > 요청이 들어올때마다 생성하고 종료하는 과정을 없애 성능 개선을 가져가기 위해
  > Concurrent package에서 제공하는 스레드 풀을 사용했다.

- 입력을 출력하기 위해서 전체 content를 입력받아야 하는데, Socket이 계속 연결된 상태여서 입력이 끝나지 않음
  > Http Header와 Body 사이에 공백이 존재한다. <br/>
  > 현재 요구사항은 Body가 존재하지 않는 요청에 대한 고려만 되어 있기 때문에, 
  > 받아온 String이 공백이면 입력을 종료시키고 있다. <br/>
  > 하지만 해당 방식은 추후 Body까지 고려할 때는 불가능한 방식이므로, 
  > 이후 Content-length로 Body 식별할 예정이다.

- 스레드 풀과 소켓의 종료 시점 조정 필요
  > 만약 작업 서버 종료전, 소켓보다 스레드 풀의 스레드들을 먼저 종료시키면,
  > 소켓을 통해 처리중이던 요청들이 비정상적 종료된다. <br/>
  > 이러한 일들을 방지하기 위해 서버 종료전 소켓을 먼저 정리하고, 그 후 스레드들을 종료시킨다.

- 요청마다 tcp handshake 가 발생한다.

- API 요청 툴 (postman) 으로 요청시 의미없는 요청이 추가적으로 들어옴

### 학습 내용
- 입력을 받기 위한 Reader별 특성 

- HTTP 메세지 Format
  - HTTP 메세지 종료 식별자

- Concurrent package의 executor
  - 제공하는 스레드풀들의 종류와 특성

- 브라우져로 요청시에 발생하는 /favicon.ico 요청
  > /favicon.ico는 웹 브라우저의 주소 표시줄, 북마크 바, 새 탭 페이지 등에 표시되는 웹사이트의 아이콘,
  > 즉 파비콘(favicon)을 가리키는 URL 이다.